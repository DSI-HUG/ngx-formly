(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3TZi":function(e,t,a){"use strict";a.r(t),a.d(t,"UnitsModule",function(){return Q});var r=a("ofXK"),n=a("NFeN"),o=a("YUcS"),i=a("QPBi"),s=a("aGKO"),l=a("tyNb"),c=a("COCr"),p=a("1AEx"),d=a("fXoL"),u=a("sP7V"),g=a("R3S3"),b=a("PumH"),h=a("M9ds"),m=a("SB49"),f=a("l8fa"),C=a("DSRs"),v=a("32Ea"),w=a("vkgz"),O=a("73Fk");let S=(()=>{class e{constructor(){}agInit(e){this.params=e,this.person=this.params.value}refresh(){return!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Ib({type:e,selectors:[["epop-collaborator-cell"]],decls:1,vars:1,consts:[[3,"person"]],template:function(e,t){1&e&&d.Pb(0,"epop-person-avatar",0),2&e&&d.nc("person",t.person)},directives:[O.a],styles:[""]}),e})();var P=a("cWTo");let y=(()=>{class e{constructor(){this.columnDefs=[],this.gridOptions={},this.alignedGrids=[],this.frameworkComponents={},this.suppressContextMenuVar=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Ib({type:e,selectors:[["epop-app-table"]],inputs:{columnDefs:"columnDefs",gridOptions:"gridOptions",alignedGrids:"alignedGrids",frameworkComponents:"frameworkComponents",suppressContextMenuVar:"suppressContextMenuVar"},decls:2,vars:3,consts:[[1,"epop-app-table-grid"],[1,"ag-theme-alpine","epop-planning-grid__grid",3,"columnDefs","gridOptions","frameworkComponents"]],template:function(e,t){1&e&&(d.Ub(0,"div",0),d.Pb(1,"ag-grid-angular",1),d.Tb()),2&e&&(d.Cb(1),d.nc("columnDefs",t.columnDefs)("gridOptions",t.gridOptions)("frameworkComponents",t.frameworkComponents))},directives:[P.a],styles:[".epop-app-table-grid[_ngcontent-%COMP%], .epop-app-table-grid__grid[_ngcontent-%COMP%]{width:100%}.epop-app-table-grid__grid[_ngcontent-%COMP%]     .ag-cell, .epop-app-table-grid__grid[_ngcontent-%COMP%]     .ag-header-cell{padding:0;background:#fff}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header{background-color:#fff;overflow:visible}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-cell, .epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-row, .epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-pinned-right-header{overflow:visible}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-cell{padding-left:.1rem}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-cell .ag-header-cell-label{justify-content:space-between;font-size:1.1rem;font-weight:600}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-cell .ag-header-cell-sorted-none{color:#7c7c7c}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-root-wrapper{border:none;margin:1.5rem 3rem}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-root-wrapper-body{height:100%}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine{--ag-border-color:#ebebeb;--ag-row-border-color:#ebebeb}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine .ag-cell{line-height:2rem;padding:1.5rem 0}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine .ag-row{font-size:1.2rem;color:#555;background-color:#fff}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine .ag-row--greyed{background-color:#f8f8f8}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine .ag-row-hover{background-color:#def8ff}"]}),e})();function D(e,t){if(1&e&&(d.Ub(0,"div"),d.Ub(1,"div"),d.Pb(2,"epop-app-table",2),d.Tb(),d.Tb()),2&e){const e=d.gc(2);d.Cb(2),d.nc("columnDefs",e.columnDefs)("frameworkComponents",e.frameworkComponents)("gridOptions",e.gridOptions)}}function k(e,t){if(1&e&&(d.Sb(0),d.Lc(1,D,3,3,"div",1),d.hc(2,"async"),d.Rb()),2&e){const e=d.gc();d.Cb(1),d.nc("ngIf",d.ic(2,1,e.unitDetails$))}}let M=(()=>{class e{constructor(e,t,a){this.translocoService=e,this.unitService=t,this.unitDetailsQuery=a,this.unitSelected=new d.n,this.frameworkComponents={CollaboratorCellComponent:S},this.columnDefs=[{valueGetter:e=>e.data,cellRenderer:"CollaboratorCellComponent",headerName:this.translateHeader("collaboratorCell"),sortable:!1,resizable:!1,width:70},{field:"lastName",headerName:this.translateHeader("lastName")},{field:"firstName",headerName:this.translateHeader("firstName")},Object.assign({},this.generateSimpleTranslatedColDef("gender")),Object.assign({},this.generateSimpleTranslatedColDef("service")),Object.assign({},this.generateSimpleTranslatedColDef("jobTitle")),{field:"workingPercentage",valueFormatter:e=>C.a.percentageToString(e.value),headerName:this.translateHeader("rate"),comparator:(e,t)=>e-t},Object.assign({},this.generateSimpleTranslatedColDef("skill"))],this.gridOptions={onGridReady:this.onGridReady.bind(this),onGridSizeChanged:this.fitGrid,rowHeight:60,getRowClass:this.getRowClass,defaultColDef:{sortable:!0,resizable:!1,lockPosition:!0}},this.unitCollaboratorRows=[]}set setSearchValue(e){this.searchValue=e,this.updateSearchValue()}ngOnInit(){this.unitDetails$=this.unitDetailsQuery.selectFirst().pipe(Object(v.a)(e=>!e),Object(w.a)(e=>{this.refreshGridData(this.transformData(e))})),this.unitService.getUnits()}refreshGridData(e){this.unitCollaboratorRows=e}onGridReady(e){this.gridApi=e.api,this.gridApi.setRowData(this.unitCollaboratorRows)}updateSearchValue(){var e;null===(e=this.gridApi)||void 0===e||e.setQuickFilter(this.searchValue)}transformData(e){var t;return null===(t=e.getPersonRequest())||void 0===t?void 0:t.map(e=>e.getPerson())}translateHeader(e){return this.translocoService.translate(`units.details.collaborators.tableHeader.${e}`)}translatePersonValue(e,t){return this.translocoService.translate(`person.${e}.${t}`)}getRowClass(e){var t;return"1"===(null===(t=e.data.collaboratorCell)||void 0===t?void 0:t.getPersonStatus())?"ag-row--greyed":""}generateSimpleTranslatedColDef(e){return{field:e,headerName:this.translateHeader(e),valueGetter:t=>this.translatePersonValue(e,t.data[e])}}fitGrid(e){var t;null===(t=e.api)||void 0===t||t.sizeColumnsToFit()}}return e.\u0275fac=function(t){return new(t||e)(d.Ob(i.i),d.Ob(g.a),d.Ob(b.a))},e.\u0275cmp=d.Ib({type:e,selectors:[["epop-unit-collaborator-list"]],inputs:{setSearchValue:"setSearchValue"},outputs:{unitSelected:"unitSelected"},decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[4,"ngIf"],[1,"ag-theme-alpine","epop-planning-grid__grid",3,"columnDefs","frameworkComponents","gridOptions"]],template:function(e,t){1&e&&d.Lc(0,k,3,3,"ng-container",0),2&e&&d.nc("translocoRead","units.details.collaborators")},directives:[i.g,r.l,y],pipes:[r.b],styles:[""]}),e})();function _(e,t){if(1&e){const e=d.Vb();d.Sb(0),d.Ub(1,"mat-tab-group"),d.Pb(2,"mat-tab",2),d.Ub(3,"mat-tab",2),d.Ub(4,"epop-page-container"),d.Ub(5,"epop-page-container-header",3),d.cc("searchValue",function(t){return d.Bc(e),d.gc().updateSearchValue(t)}),d.Tb(),d.Pb(6,"epop-unit-collaborator-list",4),d.Tb(),d.Tb(),d.Tb(),d.Rb()}if(2&e){const e=t.$implicit,a=d.gc();d.Cb(1),d.nc("@.disabled",!0),d.Cb(1),d.nc("label",e("informations.title")),d.Cb(1),d.nc("label",e("collaborators.title")),d.Cb(2),d.nc("headerActions",a.pageHeaderActions)("headerSearch",a.pageHeaderSearch),d.Cb(1),d.nc("setSearchValue",a.searchValue)}}let V=(()=>{class e extends c.a{constructor(e,t,a,r,n){super(t,e),this.translocoService=e,this.route=a,this.unitService=r,this.unitDetailsQuery=n,this.pageHeaderActions=[{icon:"mdi/plus",onClick:()=>{},position:"left",type:"medium",isDisabled:()=>!1},{icon:"mdi/printer",onClick:()=>{},position:"right",isDisabled:()=>!1},{icon:"mdi/tune",onClick:()=>{},position:"right",isDisabled:()=>!1}],this.pageHeaderSearch={placeholder:this.getPlaceholder(),onValueChanges:this.updateSearchValue,icon:"mdi/account-search-outline"},this.title=""}ngOnInit(){this.unitService.getUnitDetails(this.route.snapshot.params.unitId)}getPageTitle(e){return e.selectTranslate("details.title",{},"units")}getBackLinkPath(){return p.a.baseRoutePath()}updateSearchValue(e){this.searchValue=e}getPlaceholder(){return this.translocoService.selectTranslate("details.collaborators.placeholder",{},"units")}}return e.\u0275fac=function(t){return new(t||e)(d.Ob(i.i),d.Ob(u.a),d.Ob(l.a),d.Ob(g.a),d.Ob(b.a))},e.\u0275cmp=d.Ib({type:e,selectors:[["epop-details-page"]],features:[d.zb],decls:2,vars:1,consts:[[1,"epop-details-page"],[4,"transloco","translocoRead"],[3,"label"],[3,"headerActions","headerSearch","searchValue"],[3,"setSearchValue"]],template:function(e,t){1&e&&(d.Ub(0,"div",0),d.Lc(1,_,7,6,"ng-container",1),d.Tb()),2&e&&(d.Cb(1),d.nc("translocoRead","units.details"))},directives:[i.g,h.b,h.a,m.a,f.a,M],styles:["[_nghost-%COMP%]     .mat-tab-header{position:fixed;width:100%;z-index:4;background-color:#fff}[_nghost-%COMP%]     .mat-tab-body-wrapper{margin-top:48px}"]}),e})();var T=a("467S");let R=(()=>{class e extends c.a{constructor(e,t,a){super(t,e),this.translocoService=e,this.router=a,this.pageHeaderActions=[{icon:"mdi/plus",onClick:()=>{},position:"left",isDisabled:()=>!1,type:"big"},{icon:"mdi/printer",onClick:()=>{},position:"right",isDisabled:()=>!1}]}getPageTitle(e){return e.selectTranslate("title",{},"units")}unitSelected(e){const t=p.a.routePath("details",e.toString());this.router.navigateByUrl(t)}}return e.\u0275fac=function(t){return new(t||e)(d.Ob(i.i),d.Ob(u.a),d.Ob(l.b))},e.\u0275cmp=d.Ib({type:e,selectors:[["epop-units-page"]],features:[d.zb],decls:4,vars:1,consts:[[3,"headerActions"],[3,"unitSelected"]],template:function(e,t){1&e&&(d.Ub(0,"epop-page-container"),d.Pb(1,"epop-page-container-header",0),d.Ub(2,"div"),d.Ub(3,"epop-unit-list",1),d.cc("unitSelected",function(e){return t.unitSelected(e)}),d.Tb(),d.Tb(),d.Tb()),2&e&&(d.Cb(1),d.nc("headerActions",t.pageHeaderActions))},directives:[m.a,f.a,T.a],styles:[""]}),e})();const U=[{path:"",component:R},{path:p.a.route("units").routerPath,component:R},{path:p.a.route("details").routerPath,component:V}];let H=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},imports:[[l.e.forChild(U)],l.e]}),e})();var j=a("5itl"),G=a("9zsr"),A=a("nbLr"),I=a("tYwE"),L=a("xBko"),N=a("EIy3"),x=a("992x");let z=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},providers:[{provide:i.e,useValue:{scope:"models/person",alias:"person"},multi:!0}],imports:[[r.c,o.a,I.a,x.a,i.h,N.a]]}),e})(),B=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},imports:[[r.c,o.a,L.a]]}),e})(),F=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},providers:[{provide:i.e,useValue:{scope:"units"},multi:!0},{provide:i.e,useValue:{scope:"models/person",alias:"person"},multi:!0}],imports:[[r.c,i.h,o.a,L.a,z,B]]}),e})(),$=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},providers:[{provide:i.e,useValue:{scope:"units"},multi:!0}],imports:[[r.c,i.h,o.a,I.a,G.a,h.c,F,A.a]]}),e})(),Q=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},providers:[{provide:i.e,useValue:{scope:"units"},multi:!0}],imports:[[H,r.c,i.h,o.a,s.b,n.b,G.a,j.b,A.a,$]]}),e})()}}]);