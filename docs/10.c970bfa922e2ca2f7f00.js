(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3TZi":function(e,t,a){"use strict";a.r(t),a.d(t,"UnitsModule",function(){return E});var r=a("ofXK"),n=a("NFeN"),i=a("YUcS"),o=a("QPBi"),s=a("aGKO"),l=a("tyNb"),c=a("2Vo4"),p=a("COCr"),d=a("1AEx"),u=a("fXoL"),g=a("sP7V"),b=a("R3S3"),h=a("PumH"),m=a("M9ds"),f=a("SB49"),C=a("l8fa"),v=a("DSRs"),w=a("32Ea"),O=a("vkgz"),S=a("73Fk");let P=(()=>{class e{constructor(){}agInit(e){this.params=e,this.person=this.params.value}refresh(){return!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Ib({type:e,selectors:[["epop-collaborator-cell"]],decls:1,vars:1,consts:[[3,"person"]],template:function(e,t){1&e&&u.Pb(0,"epop-person-avatar",0),2&e&&u.nc("person",t.person)},directives:[S.a],styles:[""]}),e})();var y=a("cWTo");let T=(()=>{class e{constructor(){this.columnDefs=[],this.gridOptions={},this.alignedGrids=[],this.frameworkComponents={},this.suppressContextMenuVar=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Ib({type:e,selectors:[["epop-app-table"]],inputs:{columnDefs:"columnDefs",gridOptions:"gridOptions",alignedGrids:"alignedGrids",frameworkComponents:"frameworkComponents",suppressContextMenuVar:"suppressContextMenuVar"},decls:2,vars:3,consts:[[1,"epop-app-table-grid"],[1,"ag-theme-alpine","epop-planning-grid__grid",3,"columnDefs","gridOptions","frameworkComponents"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Pb(1,"ag-grid-angular",1),u.Tb()),2&e&&(u.Cb(1),u.nc("columnDefs",t.columnDefs)("gridOptions",t.gridOptions)("frameworkComponents",t.frameworkComponents))},directives:[y.a],styles:[".epop-app-table-grid[_ngcontent-%COMP%], .epop-app-table-grid__grid[_ngcontent-%COMP%]{width:100%}.epop-app-table-grid__grid[_ngcontent-%COMP%]     .ag-cell, .epop-app-table-grid__grid[_ngcontent-%COMP%]     .ag-header-cell{padding:0;background:#fff}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header{background-color:#fff;overflow:visible}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-cell, .epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-row, .epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-pinned-right-header{overflow:visible}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-cell{padding-left:.1rem}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-cell .ag-header-cell-label{justify-content:space-between;font-size:1.1rem;font-weight:600}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-header .ag-header-cell .ag-header-cell-sorted-none{color:#7c7c7c}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-root-wrapper{border:none;margin:1.5rem 3rem}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-root-wrapper-body{height:100%}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine{--ag-border-color:#ebebeb;--ag-row-border-color:#ebebeb}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine .ag-cell{line-height:2rem;padding:1.5rem 0}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine .ag-row{font-size:1.2rem;color:#555;background-color:#fff}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine .ag-row--greyed{background-color:#f8f8f8}.epop-app-table-grid[_ngcontent-%COMP%]     .ag-theme-alpine .ag-row-hover{background-color:#def8ff}"]}),e})();function D(e,t){if(1&e&&(u.Ub(0,"div"),u.Ub(1,"div"),u.Pb(2,"epop-app-table",2),u.Tb(),u.Tb()),2&e){const e=u.gc(2);u.Cb(2),u.nc("columnDefs",e.columnDefs)("frameworkComponents",e.frameworkComponents)("gridOptions",e.gridOptions)}}function k(e,t){if(1&e&&(u.Sb(0),u.Lc(1,D,3,3,"div",1),u.hc(2,"async"),u.Rb()),2&e){const e=u.gc();u.Cb(1),u.nc("ngIf",u.ic(2,1,e.unitDetails$))}}let M=(()=>{class e{constructor(e,t,a){this.translocoService=e,this.unitService=t,this.unitDetailsQuery=a,this.unitSelected=new u.n,this.frameworkComponents={CollaboratorCellComponent:P},this.columnDefs=[{valueGetter:e=>e.data,cellRenderer:"CollaboratorCellComponent",headerName:this.translateHeader("collaboratorCell"),sortable:!1,resizable:!1,width:70},{field:"lastName",headerName:this.translateHeader("lastName")},{field:"firstName",headerName:this.translateHeader("firstName")},Object.assign({},this.generateSimpleTranslatedColDef("gender")),Object.assign(Object.assign({},this.generateSimpleTranslatedColDef("service")),{width:200,suppressSizeToFit:!0}),Object.assign(Object.assign({},this.generateSimpleTranslatedColDef("jobTitle")),{width:200,suppressSizeToFit:!0}),{field:"workingPercentage",valueFormatter:e=>v.a.percentageToString(e.value),headerName:this.translateHeader("rate"),comparator:(e,t)=>e-t},Object.assign(Object.assign({},this.generateSimpleTranslatedColDef("skill")),{width:180,suppressSizeToFit:!0})],this.gridOptions={onGridReady:this.onGridReady.bind(this),onGridSizeChanged:this.fitGrid,rowHeight:60,getRowClass:this.getRowClass,defaultColDef:{sortable:!0,resizable:!1,lockPosition:!0}},this.unitCollaboratorRows=[]}set setSearchValue(e){this.searchValue=e,this.updateSearchValue()}ngOnInit(){this.unitDetails$=this.unitDetailsQuery.selectFirst().pipe(Object(w.a)(e=>!e),Object(O.a)(e=>{this.refreshGridData(this.transformData(e))})),this.unitService.getUnits()}refreshGridData(e){this.unitCollaboratorRows=e}onGridReady(e){this.gridApi=e.api,this.gridApi.setRowData(this.unitCollaboratorRows)}updateSearchValue(){var e;null===(e=this.gridApi)||void 0===e||e.setQuickFilter(this.searchValue)}transformData(e){var t;return null===(t=e.getPersonRequest())||void 0===t?void 0:t.map(e=>e.getPerson())}translateHeader(e){return this.translocoService.translate(`units.details.collaborators.tableHeader.${e}`)}translatePersonValue(e,t){return this.translocoService.translate(`person.${e}.${t}`)}getRowClass(e){var t;return"1"===(null===(t=e.data.collaboratorCell)||void 0===t?void 0:t.getPersonStatus())?"ag-row--greyed":""}generateSimpleTranslatedColDef(e){return{field:e,headerName:this.translateHeader(e),valueGetter:t=>this.translatePersonValue(e,t.data[e])}}fitGrid(e){var t;null===(t=e.api)||void 0===t||t.sizeColumnsToFit()}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(o.i),u.Ob(b.a),u.Ob(h.a))},e.\u0275cmp=u.Ib({type:e,selectors:[["epop-unit-collaborator-list"]],inputs:{setSearchValue:"setSearchValue"},outputs:{unitSelected:"unitSelected"},decls:1,vars:1,consts:[[4,"transloco","translocoRead"],[4,"ngIf"],[1,"ag-theme-alpine","epop-planning-grid__grid",3,"columnDefs","frameworkComponents","gridOptions"]],template:function(e,t){1&e&&u.Lc(0,k,3,3,"ng-container",0),2&e&&u.nc("translocoRead","units.details.collaborators")},directives:[o.g,r.l,T],pipes:[r.b],styles:[""]}),e})();function V(e,t){if(1&e){const e=u.Vb();u.Sb(0),u.Ub(1,"mat-tab-group"),u.Pb(2,"mat-tab",2),u.Ub(3,"mat-tab",2),u.Ub(4,"epop-page-container"),u.Ub(5,"epop-page-container-header",3),u.cc("searchValue",function(t){return u.Bc(e),u.gc().updateSearchValue(t)}),u.Tb(),u.Pb(6,"epop-unit-collaborator-list",4),u.Tb(),u.Tb(),u.Tb(),u.Rb()}if(2&e){const e=t.$implicit,a=u.gc();u.Cb(1),u.nc("@.disabled",!0),u.Cb(1),u.nc("label",e("informations.title")),u.Cb(1),u.nc("label",e("collaborators.title")),u.Cb(2),u.nc("headerActions",a.pageHeaderActions)("headerSearch",a.pageHeaderSearch),u.Cb(1),u.nc("setSearchValue",a.searchValue)}}let _=(()=>{class e extends p.a{constructor(e,t,a,r,n){super(t,e),this.translocoService=e,this.route=a,this.unitService=r,this.unitDetailsQuery=n,this.pageHeaderActions=[{icon:"mdi/plus",onClick:()=>{},position:"left",type:"medium",isDisabled:()=>!1},{icon:"mdi/printer",onClick:()=>{},position:"right",isDisabled:()=>!1},{icon:"mdi/tune",onClick:()=>{},position:"right",isDisabled:()=>!1}],this.pageHeaderSearch={placeholder:this.getPlaceholder(),onValueChanges:this.updateSearchValue,icon:"mdi/account-search-outline"}}ngOnInit(){const e=this.route.snapshot.params.unitId;this.unitService.getUnitDetails(e),this.unitDetailsQuery.selectEntity(e).subscribe(e=>this.buildPageTitle(e))}getPageTitle(e){return this.pageTile$||(this.pageTile$=new c.a("")),this.pageTile$}buildPageTitle(e){e&&this.translocoService.selectTranslate("details.titleWithName",{name:e.getUnit().getName()},"units").subscribe(e=>this.pageTile$.next(e))}getBackLinkPath(){return d.a.baseRoutePath()}updateSearchValue(e){this.searchValue=e}getPlaceholder(){return this.translocoService.selectTranslate("details.collaborators.placeholder",{},"units")}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(o.i),u.Ob(g.a),u.Ob(l.a),u.Ob(b.a),u.Ob(h.a))},e.\u0275cmp=u.Ib({type:e,selectors:[["epop-details-page"]],features:[u.zb],decls:2,vars:1,consts:[[1,"epop-details-page"],[4,"transloco","translocoRead"],[3,"label"],[3,"headerActions","headerSearch","searchValue"],[3,"setSearchValue"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Lc(1,V,7,6,"ng-container",1),u.Tb()),2&e&&(u.Cb(1),u.nc("translocoRead","units.details"))},directives:[o.g,m.b,m.a,f.a,C.a,M],styles:["[_nghost-%COMP%]     .mat-tab-header{position:fixed;width:100%;z-index:4;background-color:#fff}[_nghost-%COMP%]     .mat-tab-body-wrapper{margin-top:48px}"]}),e})();var R=a("467S");let j=(()=>{class e extends p.a{constructor(e,t,a){super(t,e),this.translocoService=e,this.router=a,this.pageHeaderActions=[{icon:"mdi/plus",onClick:()=>{},position:"left",isDisabled:()=>!1,type:"big"},{icon:"mdi/printer",onClick:()=>{},position:"right",isDisabled:()=>!1}]}getPageTitle(e){return e.selectTranslate("title",{},"units")}unitSelected(e){const t=d.a.routePath("details",e.toString());this.router.navigateByUrl(t)}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(o.i),u.Ob(g.a),u.Ob(l.b))},e.\u0275cmp=u.Ib({type:e,selectors:[["epop-units-page"]],features:[u.zb],decls:4,vars:1,consts:[[3,"headerActions"],[3,"unitSelected"]],template:function(e,t){1&e&&(u.Ub(0,"epop-page-container"),u.Pb(1,"epop-page-container-header",0),u.Ub(2,"div"),u.Ub(3,"epop-unit-list",1),u.cc("unitSelected",function(e){return t.unitSelected(e)}),u.Tb(),u.Tb(),u.Tb()),2&e&&(u.Cb(1),u.nc("headerActions",t.pageHeaderActions))},directives:[f.a,C.a,R.a],styles:[""]}),e})();const U=[{path:"",component:j},{path:d.a.route("units").routerPath,component:j},{path:d.a.route("details").routerPath,component:_}];let H=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},imports:[[l.e.forChild(U)],l.e]}),e})();var z=a("5itl"),G=a("9zsr"),N=a("nbLr"),x=a("tYwE"),A=a("xBko"),I=a("EIy3"),L=a("992x");let $=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},providers:[{provide:o.e,useValue:{scope:"models/person",alias:"person"},multi:!0}],imports:[[r.c,i.a,x.a,L.a,o.h,I.a]]}),e})(),F=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},imports:[[r.c,i.a,A.a]]}),e})(),B=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},providers:[{provide:o.e,useValue:{scope:"units"},multi:!0},{provide:o.e,useValue:{scope:"models/person",alias:"person"},multi:!0}],imports:[[r.c,o.h,i.a,A.a,$,F]]}),e})(),Q=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},providers:[{provide:o.e,useValue:{scope:"units"},multi:!0}],imports:[[r.c,o.h,i.a,x.a,G.a,m.c,B,N.a]]}),e})(),E=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},providers:[{provide:o.e,useValue:{scope:"units"},multi:!0}],imports:[[H,r.c,o.h,i.a,s.b,n.b,G.a,z.b,N.a,Q]]}),e})()}}]);